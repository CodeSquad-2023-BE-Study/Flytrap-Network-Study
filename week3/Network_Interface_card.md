# NIC에 대한 이모저모
OSI 7계층 중 2계층의 대표적인 장비입니다. 2계층인 데이터 링크 계층은 Point to Point 간 신뢰성있는 전송을 보장하기 위한 계층으로 CRC 기반의 오류 제어와 흐름 제어가 필요합니다.
NIC는 컴퓨터와 네트워크 간의 하드웨어 인터페이스를 제공하며 데이터 신뢰성을 보장하기 위한 기능을 가지고 있습니다.

![image](https://github.com/CodeSquad-2023-BE-Study/Flytrap-Network-Study/assets/103120173/3c8a4bd0-686b-4a4b-a6c0-e8dcdac5ba5b)

네트워크 어댑터, 네트워크 인터페이스 컨트롤러, LAN 어댑터라고도 부릅니다.
직접 포트로 연결하는 이더넷 네트워크 NIC 말고도 무선 네트워크를 위한 NIC가 있습니다.

## 어떻게 생겼나?
유선 NIC는 이더넷 케이블이 연결되어야 하므로 RJ45c포트를 사용합니다.
![image](https://github.com/CodeSquad-2023-BE-Study/Flytrap-Network-Study/assets/103120173/51d0954d-49d3-4b5d-b566-454668b63298)

무선 NIC는 네트워크 액세스를 위해 무선 기술을 사용해야 해서 안테나가 카드 밖으로 튀어나와있습니다.
![image](https://github.com/CodeSquad-2023-BE-Study/Flytrap-Network-Study/assets/103120173/2d7490c3-8550-4514-9086-791c5827f3d0)

## 구성
이부분은 제조사마다 달라질 수 있습니다.
- 컨트롤러
    - NIC의 핵심 부분으로, 네트워크 통신을 관리하고 제어하는 역할을 합니다. 컨트롤러는 들어오는 데이터를 처리하고 송수신 동작을 조정하는데 사용됩니다. 이것은 NIC의 성능을 직접적으로 결정하는 요소 중 하나입니다. 컨트롤러는 내장 CPU와 메모리를 가질 수 있어서 데이터 패킷의 처리를 지원합니다.
- 외부 메모리
    - NIC에서 데이터 버퍼링 및 처리를 위한 외부 메모리가 포함될 수 있습니다. 이 메모리는 데이터를 임시로 저장하고 처리하는 데 사용됩니다.
- 버스 인터페이스
    - NIC는 컴퓨터의 마더보드 또는 확장 슬롯에 연결되어야 합니다. 이를 가능하게 하는 것이 "골든 핑거"로 알려진 버스 인터페이스입니다. 이 버스 인터페이스를 통해 NIC가 컴퓨터 또는 서버와 물리적으로 연결되며 데이터를 주고받을 수 있습니다.
- LED 표시등
    - 작동 상태를 표시하기 위한 LED (Light Emitting Diode) 표시등이 포함됩니다. 이 표시등은 NIC가 활성화되고 네트워크 통신 중인지를 시각적으로 나타냅니다.
- MAC 주소
    - NIC는 고유한 식별자인 MAC (Media Access Control) 주소를 가지고 있습니다. 이 주소는 네트워크에서 NIC를 식별하고 데이터를 전송하는 데 사용됩니다. 대체로 제조업체가 할당하여 하드웨어에 저장합니다. 카드의 읽기 전용메모리(ROM)이나 다른 펌웨어 구조와 같
- NIC 포트
    - 일반적으로 네트워크 케이블이나 광 모듈을 연결하는 NIC 포트가 있습니다. 이 포트를 통해 NIC는 네트워크와 물리적으로 연결되며 데이터를 주고받습니다. 네트워크 카드에는 다양한 종류의 포트가 있을 수 있으며, 일반적으로 이더넷 케이블 또는 광섬유 점퍼와 호환됩니다.

## 주요 기능
- 장치와 네트워크의 연결을 제공합니다.
    - 유선 NIC와 무선 NIC가 있습니다.
- 장치와 네트워크의 다른 장치간에 데이터 전송 및 수신을 담당합니다.
- 데이터를 네트워크를 통해 전송할 수 있는 형식으로 변환하고, 장치가 이해할 수 있는 형식으로 다시 변환합니다.
- 데이터가 정확하게 전송될 수록하는 오류 감지 및 수정 기능이 있습니다.
- 특정 유형의 데이터에 우선 순위를 부여하거나, 데이터 전송을 제한하여 네트워크 정체를 방지함으로써 네트워크 트래픽을 관리합니다.
- 무단 액세스나 데이터 침해로부터 네트워크를 보호하기 위해 암호화 또는 이증과 같은 네트워크 보안 기능을 제공합니다.

## 데이터 무결성을 검증하는 로직 CRC
전송 데이터의 경우 네트워크 프로토콜 NIC 카드에 있는 버퍼를 패킷으로 전송할 때, 2계층에서 MAC 주소를 프레임 헤더로 첨부합니다.
이 때 CRC 계산하여 첨부합니다. (오류를 감지하는데 사용되는 강력한 체크섬)
- CRC는.. 제가 설명하지 못하겠어서 위키를 봐주세요 [링크](https://ko.wikipedia.org/wiki/%EC%88%9C%ED%99%98_%EC%A4%91%EB%B3%B5_%EA%B2%80%EC%82%AC)

### 데이터 전송과 수신을 요약하자면
1. **데이터 준비:**
    - 데이터 프레임을 보낼 때, NIC는 데이터를 비트 단위로 처리합니다.
    - NIC는 데이터를 바이트 또는 비트로 분할하고 프레임 헤더 및 프레임 테일러와 함께 전송될 데이터를 구성합니다.
2. **CRC 초기화:**
    - NIC는 CRC 레지스터를 초기화합니다. 이 레지스터는 초기에 0으로 설정됩니다.
3. **데이터 전송:**
    - NIC는 데이터 비트를 한 번에 하나씩 읽고, CRC 레지스터와 XOR(배타적 논리합) 연산을 수행합니다.
    - 데이터 비트가 1인 경우, CRC 레지스터와 1을 XOR하여 값을 업데이트합니다.
    - 데이터 비트가 0인 경우, CRC 레지스터는 변경되지 않습니다.
4. **데이터 전송 완료:**
    - 데이터 비트를 모두 처리한 후, NIC는 CRC 레지스터의 최종 값이 CRC 코드가 됩니다.
5. **데이터 수신 측:**
    - 수신 측 NIC는 받은 데이터 프레임의 CRC 코드를 계산합니다.
    - 이 CRC 코드를 송신 측에서 보낸 CRC 코드와 비교합니다.
    - 두 CRC 코드가 일치하면 데이터가 손상되지 않았다고 가정하고 처리를 계속하고, 일치하지 않으면 오류가 발생했다고 간주하고 재전송을 요청할 수 있습니다.

## MAC주소는 어떻게 비교할까?
MAC 주소를 비교할 때 이 주소를 비트 단위로 비교합니다. 

1. 수신 측 NIC는 수신된 데이터 프레임에서 송신 측의 MAC 주소를 추출합니다.
2. 송신 측과 수신 측의 MAC 주소를 비트 단위로 비교합니다. 일치 여부를 확인하기 위해 비트별로 XOR(배타적 논리합) 연산을 수행합니다.
3. XOR 연산의 결과가 모두 0인 경우, MAC 주소가 일치하고 데이터 프레임이 해당 NIC로 전달됩니다.
4. XOR 연산의 결과가 0이 아닌 경우, MAC 주소가 일치하지 않고 데이터 프레임은 버려집니다.

---
# Refs.
- https://superuser.com/questions/623511/what-is-the-exact-use-of-a-mac-address
- https://thestudygenius.com/what-is-nic-network-interface-card/#Functions_of_Network_Interface_Card_NIC
- https://android.stackexchange.com/questions/169132/is-the-mac-address-stored-in-software-or-hardware
- https://www.fibermall.com/ko/blog/network-adapter-nics-function-construction-classification.htm
- https://www.linkedin.com/pulse/what-mac-address-where-stored-netleon-technologies/
