# ë“¤ì–´ê°€ë©°

- ë³µìŠµí•´ë´…ì‹œë‹¤. ì¸í„°ë„·ì—ì„œ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ë‚˜ë¥´ë‚˜ìš”?

![image](https://github.com/CodeSquad-2023-BE-Study/Flytrap-Network-Study/assets/103120173/0ade6849-52f3-44a7-b8e0-0ba567a4e77f)

- ë¦¬í”¼í„° í—ˆë¸Œ (L2) â†’ ìŠ¤ìœ„ì¹­ í—ˆë¸Œ (L2) â†’ ë¼ìš°í„° â†’ ë¼ìš°í„° â†’ ë¼ìš°í„° â€¦. *(L3!!)*
    - *(ëŒ€ì¶© ì—„ì²­ ì¤‘ìš”í•˜ë‹¨ ì†Œë¦¬â€¦!)*

# ë¼ìš°í„° Router

- ë¼ìš°íŒ… Routingì„ í•˜ëŠ” ì¥ì¹˜ì…ë‹ˆë‹¤.
    - ë„¤íŠ¸ì›Œí¬ ì‚¬ì´ì— ë°ì´í„°ê°€ ì´ë™í•˜ëŠ” ê³¼ì •
- ë¼ìš°í„°ë„ IPì™€ MAC ì£¼ì†Œë¥¼ ê°€ì§‘ë‹ˆë‹¤. host ì²˜ëŸ¼ìš”.
- ë¼ìš°í„°ëŠ” ë„ì°©ì§€ê°€ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
    - hostì™€ ë‹¤ë¥¸ ì ì…ë‹ˆë‹¤.
    - ê·¸ëŸ¬ë¯€ë¡œ íŒ¨í‚·ì„ íê¸°í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ë§Œì•½ ë„ì°©ì§€ê°€ ìê¸° ìì‹ ì´ ì•„ë‹ˆë¼ë©´ ë‹¤ë¥¸ ì—°ê²°ëœ ì§€ì ìœ¼ë¡œ í¬ì›Œë”©í•©ë‹ˆë‹¤.
    - ë§Œì•½ ë„ì°©ì§€ IPë¥¼ ëª¨ë¥¸ë‹¤ë©´, íŒ¨í‚·ì„ íê¸°í•©ë‹ˆë‹¤.
- ë„¤íŠ¸ì›Œí¬ì™€ ë„¤í¬ì›Œí¬ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.
- ì—°ê²°ëœ ëª¨ë“  ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•œ Routing Tableì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

## ë¼ìš°íŒ… í…Œì´ë¸” Routing Table

![image](https://github.com/CodeSquad-2023-BE-Study/Flytrap-Network-Study/assets/103120173/acf7104a-a452-445b-a6b7-ae33c56ae72a)

- 3ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ë¼ìš°íŒ… í…Œì´ë¸”ì˜ ë‚´ìš©ì„ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - Directly Connected : í•´ë‹¹ ë¼ìš°í„°ì™€ ì§ì ‘ ì—°ê²°ë˜ì–´ ìˆìŒ
    - Static Routes : ê´€ë¦¬ìê°€ ì§ì ‘ ë¼ìš°íŒ… ê²½ë¡œë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.
    - Dynamic Routes : ë‹¤ë¥¸ ë¼ìš°í„°ì™€ í†µì‹ í•˜ì—¬ ìë™ìœ¼ë¡œ ê²½ë¡œë¥¼ í•™ìŠµí•©ë‹ˆë‹¤.
        - ì•Œê³ ë¦¬ì¦˜ : RIP, OSPF, BGP, EIGRP, IS-IS
- ì—¬ê¸°ì— ê¸°ë¡ëœ ê²ƒì„ ê¸°ë°˜ìœ¼ë¡œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤.

## ARP í…Œì´ë¸” ARP Tables

- ë¼ìš°í„°ëŠ” ARP í…Œì´ë¸” ë˜í•œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë¼ìš°íŒ…ì„ í•  ë•Œ ë°˜ë“œì‹œ ë³´ê²Œ ë©ë‹ˆë‹¤.
- ë™ì¼í•œ ë„¤íŠ¸ì›Œí¬ ì•ˆì—ì„œ íŒ¨í‚·ì„ ë³´ë‚¼ ë•ŒëŠ” ARP Tableì„ í™•ì¸í•˜ì—¬ í•´ë‹¹ ë§¥ì£¼ì†Œë¡œ íŒ¨í‚·ì„ ì „ë‹¬í•©ë‹ˆë‹¤.

<aside>
ğŸ’¡ **ê°„ë‹¨í•œ ARP tableì„ ì´ìš©í•œ ì´ë”ë„· í†µì‹  ê³¼ì •**

- R1 wants to communicate with Host A. R1 checks its routing table. The subnet on which Host A resides is a directly connected subnet.
- R1 checks its ARP table to find out whether the Host Aâ€™s MAC address is known. If it is not, R1 will send an ARP request to the broadcast MAC address of FF:FF:FF:FF:FF:FF.
- Host A receives the frame and sends its MAC address to R1 (ARP reply). The host also updates its own ARP table with the MAC address of the Gigabit0/0 interface on R1.
- R1 receives the reply and updates the ARP table with the MAC address of Host A.
- Since both hosts now know each other MAC addresses, the communication can occur.

[Do routers use ARP Table?](https://stackoverflow.com/questions/60737799/do-routers-use-arp-table)

</aside>

- ë§Œì•½ ë‹¤ë¥¸ ë¼ìš°í„°ë¥¼ í†µí•´ì„œ ê°€ì•¼í•œë‹¤ë©´?

![image](https://github.com/CodeSquad-2023-BE-Study/Flytrap-Network-Study/assets/103120173/d40d80c4-96f8-4755-a013-f4d8b5d37ed3)

- ARP í…Œì´ë¸”ì€ ë¹„ì–´ìˆëŠ”ì±„ë¡œ ì‹œì‘í•˜ê³ , ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ í†µí•´ êµ¬ì„±ë˜ê²Œ ë©ë‹ˆë‹¤.
- ARP í…Œì´ë¸”ì€ ë¼ìš°í„° ë¿ë§Œ ì•„ë‹ˆë¼ IPë¥¼ ê°€ì§€ëŠ” ëª¨ë“  í˜¸ìŠ¤íŠ¸ê°€ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

### Dataë¥¼ ì „ë‹¬í•´ë´…ì‹œë‹¤.

1. `10.0.44.9` ì—ì„œ DATAë¥¼ `10.0.66.7` ë¡œ ë³´ë‚´ê³  ì‹¶ìŠµë‹ˆë‹¤.
2. `10.0.44.9`ëŠ” L3 Headerë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.

| L3 Header |  | DATA |
| --- | --- | --- |
| SRC | 10.0.44.9 |  |
| DST | 10.0.66.7 |  |

1. `10.0.44.9` ëŠ” **Default Gateway(R1)** ë¡œ íŒ¨í‚·ì„ ë³´ë‚´ì•¼ í•œë‹¤ê³  íŒë‹¨í•©ë‹ˆë‹¤.
    1. DSTë¥¼ ë³´ê³  ë„¤íŠ¸ì›Œí¬ ë¶€ë¶„ì„ ë¹„êµí•˜ì—¬ ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì¸ ê²ƒì„ ì•Œ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
2. `10.0.44.9` ëŠ” Default Gatewayë¡œ íŒ¨í‚·ì„ ë³´ë‚´ê¸° ìœ„í•´ L2 Headerë¥¼ ë§Œë“­ë‹ˆë‹¤.
    1. DSTë¥¼ ì•Œê¸° ìœ„í•´ ARP Tableì„ ì°¸ê³ í•©ë‹ˆë‹¤.
    2. ë§Œì•½ ARP Tableì— ì—†ë‹¤ë©´, ARP Requestë¥¼ ë‚ ë¦½ë‹ˆë‹¤.
        1. â€œIP `10.0.44.1` ì„ ì°¾ìŠµë‹ˆë‹¤. ìˆìœ¼ë©´ MACì£¼ì†Œì¢€ ë³´ë‚´ì£¼ì„¸ìš”..! ì €ëŠ” `10.0.44.9/a9a9` ì…ë‹ˆë‹¤.â€

| L2 Header |  | L3 Header |  | DATA |
| --- | --- | --- | --- | --- |
| SRC | a9a9 | SRC | 10.0.44.9 |  |
| DST | eee1 | DST | 10.0.66.7 |  |

1. ì´ì œ R1ì´ ë°ì´í„° íŒ¨í‚·ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.
2. R1ì€ L2 í—¤ë”ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

| L3 Header |  | DATA |
| --- | --- | --- |
| SRC | 10.0.44.9 |  |
| DST | 10.0.66.7 |  |

1. R1ì€ ì´ì œ L3 Headerì— ìˆëŠ” DST IPë¥¼ ë¼ìš°íŒ… í…Œì´ë¸”ì—ì„œ ì°¾ìŠµë‹ˆë‹¤.
    1. Next hopì€ `10.0.55.2` ì…ë‹ˆë‹¤. R2ë¡œ ë³´ë‚´ë ¤ëŠ” ê²ƒì´ì£ 
2. R2ì—ê²Œ ë³´ë‚´ê¸° ìœ„í•´ R1ì€ L2 Headerë¥¼ ë§Œë“­ë‹ˆë‹¤.
    1. ì—­ì‹œ ëª¨ë¥´ë©´ ARP Requestë¥¼ ë‚ ë¦½ë‹ˆë‹¤.

| L2 Header |  | L3 Header |  | DATA |
| --- | --- | --- | --- | --- |
| SRC | eee3 | SRC | 10.0.44.9 |  |
| DST | eee2 | DST | 10.0.66.7 |  |

1. ì´ì œ R2ë¡œ ë°ì´í„° íŒ¨í‚·ì´ ì˜®ê²¨ê°”ìŠµë‹ˆë‹¤.
2. R2ë„ L2 Headerë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

| L3 Header |  | DATA |
| --- | --- | --- |
| SRC | 10.0.44.9 |  |
| DST | 10.0.66.7 |  |

1. R2ê°€ L3 Headerì˜ DSTë¥¼ ë¼ìš°íŒ… í…Œì´ë¸”ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.
2. R2ì— ì—°ê²°ëœ ì„œë¸Œë„·ì— ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    1. íŒ¨í‚·ì˜ ë§ˆì§€ë§‰ hopì€ `10.0.66.7`ì…ë‹ˆë‹¤.
3. R2ì—ì„œ `10.0.66.7` ë¡œ ë³´ë‚´ê¸° ìœ„í•´ì„œ L2 Headerë¥¼ ë§Œë“­ë‹ˆë‹¤.
    1. ë˜ ëª¨ë¥´ë©´ ARP Requestë¥¼ ë³´ëƒ…ë‹ˆë‹¤.

| L2 Header |  | L3 Header |  | DATA |
| --- | --- | --- | --- | --- |
| SRC | eee4 | SRC | 10.0.44.9 |  |
| DST | c7c7 | DST | 10.0.66.7 |  |
1. ì´ì œ `10.0.66.7` ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤.
2. ì´ í˜¸ìŠ¤íŠ¸ëŠ” ì´ì œ L2 Headerë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

| L3 Header |  | DATA |
| --- | --- | --- |
| SRC | 10.0.44.9 |  |
| DST | 10.0.66.7 |  |
1. L3 Headerë„ ì‚­ì œí•©ë‹ˆë‹¤.

| DATA |
| --- |
|  |
|  |
1. ì´ì œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤ ğŸ‘
2. ì´ì œ ë‹¤ì‹œ ì‘ë‹µì„ ë³´ë‚´ì¤˜ì•¼í•©ë‹ˆë‹¤.

| RESPONSE DATA |
| --- |
|  |
|  |
1. ì´ì œ ë˜‘ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë‹¤ì‹œ ëŒì•„ê°‘ì‹œë‹¤.

- ì˜ˆì™¸ ìƒí™©

### ì§ì ‘ ì„¤ëª…í•´ë´…ì‹œë‹¤.

![image](https://github.com/CodeSquad-2023-BE-Study/Flytrap-Network-Study/assets/103120173/13fee54a-df73-4c5e-93de-e09d3b5d5fa3)

## ****ê³„ì¸µì  ë¼ìš°íŒ… Hierarchical Routing****

- ê°ê°ì˜ ë¼ìš°í„°ëŠ” í•˜ìœ„ ê³„ì¸µ ë„¤íŠ¸ì›Œí¬ì˜ ì„¸ë¶€ ì‚¬í•­ì„ ê³ ë ¤í•˜ì§€ ì•ŠìŒìœ¼ë¡œì¨, ë¼ìš°íŒ… í…Œì´ë¸”ì˜ ì—”íŠ¸ë¦¬ ìˆ˜ë¥¼ ì¤„ì—¬ ì²˜ë¦¬ ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- scale ì„ ëŠ˜ë¦¬ê³  ì¤„ì´ëŠ”ë° ì‰½ìŠµë‹ˆë‹¤.

![image](https://github.com/CodeSquad-2023-BE-Study/Flytrap-Network-Study/assets/103120173/3dad835a-c28c-4686-8558-008654d4eb89)
![image](https://github.com/CodeSquad-2023-BE-Study/Flytrap-Network-Study/assets/103120173/761684e3-85e0-4a49-a144-29c1804f18d0)


- ê³„ì¸µì ìœ¼ë¡œ êµ¬ì„±ëœ ì¸í„°ë„·

---

# Refs.
- https://talk.op.gg/s/lol/free/5478193/%EB%A7%9D%EC%82%AC%EC%9A%A9%EB%A3%8C%20%EC%9D%B4%EC%8A%88%EC%97%90%20%EA%B4%80%ED%95%9C%20%EB%82%98%EB%A6%84%EB%8C%80%EB%A1%9C%EC%9D%98%20%EC%A0%95%EB%A6%AC
- https://youtu.be/AzXys5kxpAM?si=bFWu0L44O-RWyGHu
